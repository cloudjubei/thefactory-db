{
  "id": "67749a79-fda3-4c2b-9c35-b644c761b895",
  "status": "=",
  "title": "Ongoing Improvements",
  "description": "Various ongoing improvements to the project",
  "features": [
    {
      "id": "8a94bd10-9838-4e6f-9b6c-1b2060d6de40",
      "status": "=",
      "title": "Aim for close to 100% test coverage",
      "description": "We need to make sure that the tests cover as close as 100% of the codebase.\nObviously, things like the ai service with getting results from the AI cannot be fully tested - but we can test for many ranges of responses by mocking the LLM responses appropriately. The same idea should be taken everywhere to try to achieve 100% coverage.\n\nOne important thing is to make sure that data that is entering and leaving endpoints is validated thoroughly to make sure that it matches the expected schema. This should be part of the code and the tests should validate it too (i.e. malformed objects being rejected).\n\nThere needs to be a relevant section in @README.md  explaining how vital testing is and to refer to @docs/TESTING.md for all guidance related to writing tests and the standard for them. For reference there is also the @docs/CODE_STANDARD.md  document that highlights the coding standard within the project.\n\nNEVER FIX CODE JUST SO TESTS PASS - THE PROJECT CODE NEEDS TO MAKE SENSE AND WORK SO THE FEATURES ARE SATISFIED. TESTS ALWAYS NEED TO POKE AT HOLES AND EDGES OF THE CODE.",
      "context": [],
      "createdAt": "2025-09-19T10:36:00.358Z",
      "updatedAt": "2025-09-22T22:55:16.613Z",
      "blockers": []
    },
    {
      "id": "656fa3b5-b86a-41f3-8312-3aa1ed774c6d",
      "status": "=",
      "title": "Code standard",
      "description": "The document @docs/CODE_STANDARD.md  highlights the overall architecture and coding standards maintained in this project.\nThere is a clear reference to it inside @README.md and @docs/FILE_ORGANISATION.md so that anyone creating new features or updating existing ones will go to it.\nIt should be as succinct as possible, but explaining the idea as well as possible.\n\nGo over all the code and make sure that it satisfies the standards.",
      "context": [],
      "createdAt": "2025-09-19T10:36:08.586Z",
      "updatedAt": "2025-09-22T22:55:15.264Z",
      "blockers": []
    },
    {
      "id": "03858e2a-b346-4a6c-b711-427a85401e8e",
      "status": "+",
      "title": "Hybrid Search needs improvements",
      "description": "Right now the search doesn't seem to be pick up file names for keyword search.\nWhen the query is passed in - for embedding/semantic search - it should process the whole query and let the embeddings score like they do now. But for keyword search, the query should be space separated - and each such keyword should be tested against the file contents and the file name. File name should score separately from contents - it should be weighed 50/50 (file name vs contents) for the final score for the overall keyword score.",
      "context": [],
      "createdAt": "2025-09-23T12:18:10.277Z",
      "updatedAt": "2025-09-23T12:32:09.157Z",
      "completedAt": "2025-09-23T12:32:09.157Z"
    },
    {
      "id": "a83e8f50-66a3-44f7-a01f-057de5bb0a00",
      "status": "+",
      "title": "The current tests are too basic",
      "description": "We need to have more advanced tests to really see that the search functionality is working appropriately.\nWe need two sets of files - 1 made up non-code documents and 2 this project's files (all of them).\n\nWe need to have the tests cover all sorts of cases for using the hybrid search - when the weight is 0, 0.2, 0.5, 0.8, 1.0 . When there is information just in the title of the file, just in the contents or just in the embeddings (semantically it's there).",
      "context": [],
      "createdAt": "2025-09-23T12:45:38.880Z",
      "updatedAt": "2025-09-23T12:51:52.069Z",
      "completedAt": "2025-09-23T12:51:52.069Z"
    },
    {
      "id": "f018a399-a2fb-47f5-9990-b89fc7381097",
      "status": "+",
      "title": "Need to create an e2e tests using a real db under `tests/e2e`",
      "description": "First we need to explain to the user how to easily spin up a test database with docker compose that will be used for e2e tests.\nThen assuming the database is running, there need to be e2e tests for indexing and most importantly for hybrid-search - mirroring all the tests inside `tests` that would require to call `openDatabase`",
      "context": [],
      "createdAt": "2025-09-23T13:02:45.316Z",
      "updatedAt": "2025-09-23T16:59:28.369Z",
      "blockers": [],
      "completedAt": "2025-09-23T16:17:21.497Z"
    },
    {
      "id": "bd58e850-de61-4e54-adba-9a7b49e76f29",
      "status": "+",
      "title": "Make more complex e2e tests",
      "description": "THere should be an equivalent e2e test version of @tests/hybrid-search-advanced.test.ts .\nWe should have one version for entities and one for documents.\nThe goal is to stress test different weights to the scores [0,0.2,0.5,0.8,1] of the keywords vs embedding weights.\nWe also make sure that files are picked up based on their file names - so there need to be appropriate tests for that.\nFollow @docs/TESTING.md for standards. \nMake sure the tests are as atomic and self-contained as possible.\nPrefer more easily failable tests rather than a huge battery of tests that could fail at the beginning.",
      "context": [
        "tests/hybrid-search-advanced.test.ts",
        "docs/TESTING.md"
      ],
      "createdAt": "2025-09-23T15:07:16.099Z",
      "updatedAt": "2025-09-23T17:00:30.567Z",
      "blockers": [],
      "completedAt": "2025-09-23T16:20:36.753Z"
    },
    {
      "id": "94a33d4a-7698-4962-86cd-cb3a19d7f664",
      "status": "+",
      "title": "Tests fail",
      "description": "updatedAt and fts regeneration tests @tests/e2e/updates-and-fts.e2e.test.ts  \nfail",
      "context": [
        "tests/e2e/updates-and-fts.e2e.test.ts"
      ],
      "createdAt": "2025-09-23T17:00:26.541Z",
      "updatedAt": "2025-09-23T17:11:58.623Z",
      "rejection": "FAIL  tests/e2e/updates-and-fts.e2e.test.ts > E2E: Updates and FTS regeneration (real DB) > documents: updates should regenerate updatedAt\nAssertionError: expected NaN to be greater than NaN\n ❯ tests/e2e/updates-and-fts.e2e.test.ts:42:16\n     40| \n     41|     const t1 = new Date(upd!.updatedAt).getTime()\n     42|     expect(t1).toBeGreaterThan(t0)\n       |                ^\n     43|   })\n     44| \n\n⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[5/6]⎯\n\n FAIL  tests/e2e/updates-and-fts.e2e.test.ts > E2E: Updates and FTS regeneration (real DB) > entities: updates should regenerate updatedAt and FTS on content changes\nAssertionError: expected NaN to be greater than NaN\n ❯ tests/e2e/updates-and-fts.e2e.test.ts:69:16\n     67|     // updatedAt must increase\n     68|     const t1 = new Date(entUpd!.updatedAt).getTime()\n     69|     expect(t1).toBeGreaterThan(t0)\n       |                ^\n     70| \n     71|     // FTS should no longer match \"alpha\" and should match \"beta\"",
      "blockers": [],
      "completedAt": "2025-09-23T17:11:58.623Z"
    },
    {
      "id": "734c141d-83b8-4a4c-8ed5-75ef2d5ea874",
      "status": "+",
      "title": "Complex tests fail - suspicion title doesn't get taken into account when hybrid searching",
      "description": "@tests/e2e/documents-hybrid-advanced.e2e.test.ts fails",
      "context": [
        "tests/e2e/documents-hybrid-advanced.e2e.test.ts"
      ],
      "createdAt": "2025-09-23T17:01:25.209Z",
      "updatedAt": "2025-09-23T17:19:24.814Z",
      "rejection": "FAIL  tests/e2e/documents-hybrid-advanced.e2e.test.ts > E2E: Documents Hybrid Search Advanced (real DB) > w=0.2: both signals contribute; semantic-only present near top and title-only starts to surface\nAssertionError: expected 10 to be less than or equal to 8\n ❯ tests/e2e/documents-hybrid-advanced.e2e.test.ts:112:28\n    110| \n    111|       const bestSemantic = Math.min(...ids.semanticOnly.map((id) => pos(res, id)))\n    112|       expect(bestSemantic).toBeLessThanOrEqual(8)\n       |                            ^\n    113| \n    114|       const bestTitle = Math.min(...ids.titleOnly.map((id) => pos(res, id)))\n\n⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[1/6]⎯\n\n FAIL  tests/e2e/documents-hybrid-advanced.e2e.test.ts > E2E: Documents Hybrid Search Advanced (real DB) > w=1 (text-only): filename (src) match enables retrieval even with unrelated content\nAssertionError: expected 5 to be less than or equal to 3\n ❯ tests/e2e/documents-hybrid-advanced.e2e.test.ts:152:25\n    150|       // Filename-based docs should be clearly surfaced\n    151|       const bestTitle = Math.min(...ids.titleOnly.map((id) => pos(res, id)))\n    152|       expect(bestTitle).toBeLessThanOrEqual(3)\n       |                         ^\n    153| \n    154|       // Semantic-only without exact keywords in text should lag\n\n⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[2/6]⎯\n\n FAIL  tests/e2e/documents-hybrid-advanced.e2e.test.ts > E2E: Documents Hybrid Search Advanced (real DB) > filename (src) contributes to textScore: top results include src hits when textWeight=1\nAssertionError: expected false to be true // Object.is equality\n\n- Expected\n+ Received\n\n- true\n+ false\n\n ❯ tests/e2e/documents-hybrid-advanced.e2e.test.ts:168:28\n    166|       const top5 = res.slice(0, 5).map((r) => r.id)\n    167|       const hitFromTitle = ids.titleOnly.some((id) => top5.includes(id))\n    168|       expect(hitFromTitle).toBe(true)\n       |                            ^\n    169|     })\n    170|   },\n\n⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[3/6]⎯\n\n FAIL  tests/e2e/entities-hybrid-advanced.e2e.test.ts > E2E: Entities Hybrid Search Advanced (real DB) > w=0 (semantic-only): semantic entities appear above controls and near top\nAssertionError: expected 7 to be less than or equal to 5\n ❯ tests/e2e/entities-hybrid-advanced.e2e.test.ts:97:28\n     95| \n     96|       // Semantic should be competitive at w=0\n     97|       expect(bestSemantic).toBeLessThanOrEqual(5)\n       |                            ^\n     98|     })\n     99|",
      "blockers": [],
      "completedAt": "2025-09-23T17:19:24.814Z"
    }
  ],
  "featureIdToDisplayIndex": {
    "656fa3b5-b86a-41f3-8312-3aa1ed774c6d": 1,
    "8a94bd10-9838-4e6f-9b6c-1b2060d6de40": 2,
    "03858e2a-b346-4a6c-b711-427a85401e8e": 3,
    "a83e8f50-66a3-44f7-a01f-057de5bb0a00": 4,
    "f018a399-a2fb-47f5-9990-b89fc7381097": 5,
    "bd58e850-de61-4e54-adba-9a7b49e76f29": 6,
    "94a33d4a-7698-4962-86cd-cb3a19d7f664": 7,
    "734c141d-83b8-4a4c-8ed5-75ef2d5ea874": 8
  },
  "createdAt": "2025-09-19T01:04:36.087Z",
  "updatedAt": "2025-09-19T01:04:36.087Z"
}